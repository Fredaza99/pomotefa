<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomotefa - Entre nessa jornada de estudo gamificado.</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/icones/favicon-32x32.png">
    <link rel="manifest" href="/site.webmanifest">


  <link rel="stylesheet" href="style.css">
</head>
<body class="oculto">




  
  
  
  <div class="app-container">
    <!-- Header Navigation -->
    <header class="app-header">
      <div class="header-left">
        <h1>POMOTEFA<img src="images/icones/star.png" alt="Estrela" class="icone-pixel-star"></h1>
        <div class="header-stats">
          <span id="headerTotalHoras">0 horas estudadas</span>
        </div>
      </div>
      <nav class="app-nav">
        <button class="nav-btn" onclick="abrirModalConquistas()"><i class="fas fa-trophy"></i> Conquistas</button>
        <button class="nav-btn" onclick="window.location.href='perfil.html'"><i class="fas fa-user"></i> Perfil</button>
        <button class="nav-btn" onclick="window.location.href='dashboard.html'"><i class="fas fa-chart-line"></i> Dashboard</button>
        <button class="nav-btn logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
      </nav>
    </header>

    <!-- Main Content Grid -->
    <main class="app-main">
      <!-- Avatar Section -->
      <section class="avatar-section">
        <div class="avatar-card">
          <div class="mascote-container">
            <img id="mascoteImg" src="images/mascote1.webp" alt="Mascote" width="200">
            <div class="xp-container">
              <div class="xp-bar">
                <div id="xpMascote" class="xp-fill"></div>
                <div id="xpTexto" class="xp-texto">XP: 0 / 0 min</div>
              </div>
              <div id="nivelMascote" class="xp-nivel">1</div>
            </div>
          </div>
        </div>
      </section>

<div id="modalConquistas" class="modal">
  <div class="modal-content">
    <span class="close" onclick="fecharModalConquistas()">√ó</span>
    <h2>üèÜ Conquistas</h2>
    <p id="progressoConquistas">0 de 0 conquistadas (0%)</p>
    <div id="conquistasDesbloqueadas" class="conquistas-grid"></div>

    <h3 class="secao-conquistas">Conquistas Nao Alcan√ßadas</h3>
    <div id="conquistasBloqueadas" class="conquistas-grid"></div>
  </div>
</div>

      <!-- Timer Section -->
      <section class="timer-section">
        <div class="timer-card">
          <div class="timer-display">
            <div id="timer">00:00:00</div>
          </div>
          <div class="timer-controls">
            <select id="materiaAtual" class="materia-select"></select>
            <div class="control-buttons">
              <button onclick="iniciarEstudo()" class="control-btn start-btn">
                <i class="fas fa-play"></i> Iniciar
              </button>
              <button onclick="pararEstudo()" class="control-btn stop-btn">
                <i class="fas fa-stop"></i> Parar
              </button>
            </div>
            <div class="timer-add-subject">
              <h4><i class="fas fa-plus"></i> Adicionar Nova Mat√©ria</h4>
              <div class="form-config">
                <input type="text" id="novaMateria" placeholder="Nome da mat√©ria">
                <input type="number" id="metaHoras" placeholder="Meta semanal (h)" min="1">
                <button onclick="adicionarMateria()" class="add-btn">
                  <i class="fas fa-plus"></i> Adicionar
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>


      <!-- Goals Table Section -->
      <section class="goals-section">
        <div class="table-card">
          <div class="table-header">
            <h3><i class="fas fa-target"></i> Metas de Estudo</h3>
            <button id="editarMateriasBtn" onclick="ativarModoEdicao()" class="edit-btn">
              <i class="fas fa-edit"></i> Editar
            </button>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Mat√©ria</th>
                  <th>Meta (h)</th>
                  <th>Estudado (min)</th>
                </tr>
              </thead>
              <tbody id="tabelaMetas"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <!-- Edit Mode Modal -->
    <div id="modoEdicao" class="modal" style="display: none;">
      <div class="modal-content">
        <span class="close" onclick="document.getElementById('modoEdicao').style.display='none'">√ó</span>
        <h2><i class="fas fa-edit"></i> Editar Mat√©rias</h2>
        <div class="edit-table-container">
          <table>
            <thead>
              <tr>
                <th>Mat√©ria</th>
                <th>Meta (h)</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="tabelaEdicao"></tbody>
          </table>
        </div>
        <button onclick="salvarEdicoes()" class="save-btn">
          <i class="fas fa-save"></i> Salvar altera√ß√µes
        </button>
      </div>
    </div>
  </div>
<canvas id="backgroundCanvas"></canvas> <!-- Canvas como fundo -->
<script>

  const canvas = document.getElementById("backgroundCanvas");
  const ctx = canvas.getContext("2d");
  const colors = ["rgba(255, 255, 255, ALPHA)", "rgba(173, 216, 230, ALPHA)", "rgba(255, 223, 0, ALPHA)"];



  // Ajusta o tamanho do canvas
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  // Configura√ß√µes das estrelas
  const stars = [];
  const totalStars = 1500; // N√∫mero total de estrelas

  // Inicializa as estrelas
  function createStars() {
    for (let i = 0; i < totalStars; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2, // Tamanho aleat√≥rio
        alpha: Math.random(), // Brilho inicial
        alphaChange: Math.random() * 0.02 - 0.01, // Velocidade de mudan√ßa do brilho
      });
    }
  }

  // Atualiza o brilho das estrelas
  function updateStars() {
    stars.forEach((star) => {
      star.alpha += star.alphaChange;

      // Inverte o brilho ao atingir os limites
      if (star.alpha <= 0 || star.alpha >= 1) {
        star.alphaChange *= -1;
      }
    });
  }

  // Desenha as estrelas no canvas
  function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "rgba(0, 0, 0, 1)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    stars.forEach((star) => {
      ctx.beginPath();
      ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`; // Brilho din√¢mico
      ctx.fill();
    });
  }


  // Loop de anima√ß√£o
  function animate() {
    updateStars();
    drawStars();
    requestAnimationFrame(animate);
  }

  createStars();
  animate();


</script>

  <script type="module" src="script_firebase_corrigido_final.js"></script>
</body>
</html>
